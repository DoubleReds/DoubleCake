<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>列表详情页</title>
	<link rel="stylesheet" type="text/css" href="../css/reset.css">
	<link rel="stylesheet" type="text/css" href="../css/list.css">
</head>
<body>
	<script src="../data/data.js"></script>	
	<script src="../libs/common.js"></script>	

			<!--头部-->
		<header class="global_header">
			<!--头部显示的上部-->
			<div class="top">
				<div class="top_bar">
					<div class="top_bar_right">
						<a href="login.html" class="top_bar_right_a1">登录</a>
						<b>/</b>
						<a href="register.html" class="top_bar_right_a2">注册</a>

						<a href="" class="top_bar_right_a3">
							<img src="//newimgcdn.lapetit.cn/web/images/qr_code_top.png">微信
						</a>
					</div>
				</div>
			</div>
			<!--头部显示的下部主体内容-->
			<div class="header_content">
				<div class="select_city_wrap">
					<span class="span"></span>
					<a href="">
						<span>北京</span>
					</a>
					<a href="">查询地址是否可配送</a>
				</div>
				<a href="" class="header_content_1" src="//newimgcdn.lapetit.cn/web//images/logo_new.png">
				</a>

				<div class="search_wrap">
					<input class="input_wrap" type="text" value="" placeholder="雪域牛乳芝士">
					<button class="search_btn"></button>
					<a href="cart.html"><button class="nav_cart_wrap" id="car"></button></a>
				</div>

				<div class="header_content_3">
					<ul>
						<li>
							<a href="index.html" class="active">首页</a>
						</li>
						<li>
							<a href="list.html" class="cake">蛋糕</a>
						</li>
						<li>
							<a href="" class="gift">礼品</a>
						</li>
						<li>
							<a href="" class="hava_inner">企业专区</a>
							<div class="inner_wrap">
								<a href="" class="inner_item">企业采购</a>
								<a href="" class="inner_item">大客户区</a>
								<a href="" class="inner_item">福利券区</a>
								<a href="" class="inner_item">银行专区</a>
								<a href="" class="inner_item">小食盒区</a>
							</div>
						</li>
						<li>
							<a href="" class="hava_inner">我的诺心</a>
							<div class="inner_wrap">
								<a href="" class="inner_item">我的订单</a>
								<a href="" class="inner_item">找回密码</a>
								<a href="" class="inner_item">礼卡专区</a>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</header>

		<!--主体-->
		<div class="main">
			<!--主体上部-->
			<div class="fliter_wrap">
				
					<div class="fliter_wrapp">
								<p>
									<span>口味：</span>
									<a href="">全部</a>
									<a href="">慕斯</a>
									<a href="">巧克力</a>
									<a href="">巧克力</a>
									<a href="">芝士</a>
									<a href="">鲜果</a>
									<a href="">冰淇淋</a>
									<a href="">奶油</a>
								</p>
								<p>
									<span>规格：</span>
									<a href="">全部</a>
									<a href="">2-4人食</a>
								    <a href="">5-8人食</a>
								    <a href="">10-12人食</a>
							       <a href="">15-20人食</a>
								</p>
				</div>
			</div>
			<!--主体下部-->
		<div class="content-wrap">
				<div class="layout">
					<div class="data-show">
						<ul class="data-list" id="data-list">
							 <!-- <li class="item">
								<a class="img-wrap" href="javascript:;">
									<img src="https://imagecdn.lapetit.cn/postsystem/docroot/images/goods/201212/10800/list_10800_o.jpg?v=1525770091" />
								</a>
								<h3>人气爆款</h3>
								<span>￥198</span>
								<a><button>加入购物车</button></a>
							</li>  -->

						</ul>
						
					</div>
				</div>
			</div>
		</div>			
		</div>
		<!--尾部-->
		<footer class="footer">
			<div class="footer_online">

			</div>
			<div class="footer_tel">
				<span>客服电话：4001-578-578 服务时间（08:30-22:30）</span>
			</div>
			<div class="footer_nav">
				<p class="clearfix">
					<a href="javascript:;">诺心公告</a>
					<a href="javascript:;">诺心公告</a>
					<a href="javascript:;">诺心公告</a>
					<a href="javascript:;">诺心公告</a>
					<a href="javascript:;">诺心公告</a>
					<a href="javascript:;">诺心公告</a>
				</p>
			</div>
			<div class="footer_address">
				<p> 诺心食品（上海）有限公司 上海徐汇区田林路140号28号楼503室 客服邮箱：services@lecake.com 公司电话：4001-578-578</p>
			</div>
			<div class="footer_copy">
				<p>copyright©2010-2017诺心lecake.com版权所有 沪ICP备10211730</p>
			</div>
		</footer>
		<script src="../scripts/xuanran.js"></script>
	<script>
	//把数据放进cookie中querySelectorAll
	var aButton=document.querySelectorAll("button[data-id]");
	oWrap.onclick=delegation(aButton,addCar);
	function addCar(){
		//把商品id放入cookie中
		var goodsId = this.getAttribute("data-id");
		if(!getCookie("data-show")){
			var goodsObj = [
					{
						"id":goodsId,
						"num":1
					}
				]
				var goodsString = JSON.stringify(goodsObj);
				setCookie("data-show",goodsString)
				carNum(car);
		}else{
			//对数据进行辨别操作;

				var goodsString = getCookie("data-show");
				// console.log(goodsString)
				var goodsArray = JSON.parse(goodsString);
				//判定当前id是否存在;

				var hasId = false;

				for(var i = 0 ; i < goodsArray.length ; i++){
					if(goodsArray[i].id === goodsId){
						goodsArray[i].num ++;
						//商品数量递增;
						hasId = true;
						break;
					}
				}

				//如果id不存在;
				if(!hasId){
					goodsArray.push({
						"id":goodsId,
						"num":1
					})
				}
				//把操作好的数据放入cookie之中;
				goodsString = JSON.stringify(goodsArray);
				setCookie("data-show",goodsString);
				carNum(car);
			}
		}

	</script>
	<script>
			//购物数量;
			function carNum(el){
				var carListString = getCookie("data-show");
				console.log(carListString);
				var carListArray = JSON.parse(carListString);
				// console.log(carListArray)
				var num = 0;
				for(var i = 0 ; i < carListArray.length ; i++){
					num += parseInt(carListArray[i].num);
				}
	
				el.innerHTML = num;
				
				// console.log(num);
			}
			var car = document.querySelector("#car");
			
	
			//跳转到购物车的详情页;
			car.onclick = function(){
				location.href = "car.html";
				
			}
		</script>	
</body>
</html>